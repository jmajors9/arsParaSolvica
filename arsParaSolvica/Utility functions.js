// Utility functions// Code was written by Tyler Akins and is placed in the public domain// It would be nice if you left this header.  http://rumkin.com// Remove whitespace from beginning and end of textfunction Trim(s) {   while (s.length && " \t\r\n".indexOf(s.charAt(0)) >= 0) {      s = s.slice(1, s.length);   }   while (s.length && " \t\r\n".indexOf(s.charAt(s.length - 1)) >= 0) {      s = s.slice(0, s.length - 1);   }      return s;}// Exchange characters in F for ones in T for the string S.  If T is not// specified or not long enough, the characters are removed.// "aaabbbC!!" = Tr("AaaBbbCcc", "ABc", "ab!")// "Test thing" = Tr("Test\n thing", "\r\n")function Tr(s, f, t) {   var o = '';      if (typeof(t) != 'string') {      t = '';   }      for (var i = 0; i < s.length; i ++) {      var c = s.charAt(i);      var idx = f.indexOf(c);      if (idx >= 0) {         if (idx < t.length) {            o += t.charAt(idx);         }      }      else {         o += c;      }   }      return o;}// Insert CR and LF characters into e, based on the position of those// characters in T.// If T = "ab\ncd" and E = "zyxw", the result will be "zy\nxw"function InsertCRLF(t, e) {   var o = "", i, j;      for (i = 0, j = 0; i < t.length; i ++) {      if ("\r\n".indexOf(t.charAt(i)) >= 0) {         o += t.charAt(i);      }      else {         o += e.charAt(j ++);      }   }      return o;}// Returns an alphabet with a key in front.// Passing the key of "Four. Score! And Seven Days Ago?"// will return  "FOURSCEANDVYGBHIJKLMPQTWXZ"// key = the letters to include in the beginning// alphaet = the alphabet to use (if not A-Z)function MakeKeyedAlphabet(key, alphabet) {   var out = "";   if (typeof(alphabet) != 'string')      alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';   else      alphabet = alphabet.toUpperCase();         if (typeof(key) != 'string')      return alphabet;         key = key.toUpperCase() + alphabet;   for (var i = 0; i < key.length; i ++) {      if (out.indexOf(key.charAt(i)) < 0 && alphabet.indexOf(key.charAt(i)) >= 0) {         out += key.charAt(i);      }   }      return out;}// Make any string contain just alpha charactersfunction OnlyAlpha(str) {   var out = "";      for (i = 0; i < str.length; i ++) {      var b = str.charAt(i);      if (b.toUpperCase() >= 'A' && b.toUpperCase() <= 'Z') {         out += b;      }   }      return out;}// Change a string into valid HTML textfunction HTMLEscape(str) {   var out = "";      for (var i = 0; i < str.length; i ++) {      var c = str.charAt(i);      if (c == '&')         c = '&amp;';      if (c == '>')         c = '&gt;';      if (c == '<')         c = '&lt;';      if (c == "\n")         c = "<br>\n";      out += c;   }      return out;}// Pass it a textarea object, get it resized automagicallyfunction ResizeTextArea(obj) {   var s = obj.value + "\n";   var newlines = 0;   var max_chars = 0;   var i, chars = 0, wide = 0;   var obj_max_cols = 100, obj_min_cols = 40, obj_max_rows = 15;   var scrollbar_width = 2;      for (i = 0; i < s.length; i ++) {      var c = s.charAt(i);      if (c == "\n") {         if (max_chars < chars)            max_chars = chars;            chars = 0;            newlines ++;      }      else {         if (chars == obj_max_cols - scrollbar_width) {            max_chars = chars;            j = i;            var c2 = s.charAt(j);                        while (c2 != "\n" && c2 != ' ' && c2 != "\t" && j > 0) {               j --;               c2 = s.charAt(j);            }                        if (c2 != "\n" && j > 0) {               // Not one big long line               newlines ++;               chars = 0;               i = j;            }                        else {               wide = 1;            }         }         else {            chars ++;         }      }            // Short-circuit      if (obj_max_rows <= newlines + wide + 1 && obj_max_cols <= max_chars + scrollbar_width) {         obj.rows = obj_max_rows;         obj.cols = obj_max_cols;         return;      }   }      obj.rows = Math.min(obj_max_rows, newlines + wide + 1);   obj.cols = Math.min(Math.max(obj_min_cols, max_chars + scrollbar_width), obj_max_cols);}function Reverse_String(s) {   var o = '', i = s.length;      while (i --) {      o += s.charAt(i);   }      return o;}// Returns 1 if there was no change, 0 if it is not the same// Saves value in the element if it was changed, so subsequent calls// to this function will return 1 until it changes again.// Don't use this function like this://   if (IsUnchanged(x) && IsUnchanged(y) && IsUnchanged(z)) { ... }// The logic code could short-circuit on X or Z (depending on how it// gets parsed) and will jump to the 'if' block without evaluating// all of the variables.  Use this instead://   if (IsUnchanged(x) * IsUnchanged(y) * IsUnchanged(z)) { ... }//   if (IsUnchanged(x) + IsUnchanged(y) + IsUnchanged(z) == 3) { ... }function IsUnchanged(e){   var v;      if (e.type == 'checkbox')   {      v = e.checked.toString();   }   else   {      v = e.value;   }      if (v != e.getAttribute('_oldValue'))   {      e.setAttribute('_oldValue', v);      return 0;   }      return 1;}// Makes a tableau out of a passed in key// Key should be 25 characters!function HTMLTableau(key){   var out = '';      for (var i = 0; i < 25; i ++)   {      if (i > 0 && i % 5 == 0)      {         out += "<br>\n";      }      if (i % 5)      {         out += " ";      }      out += key.charAt(i);   }      return "<tt>" + out + "</tt>";}// Change multiple spaces into &nbsp; to preserve padding.function SwapSpaces(in_str){   var out = '';   var multi = 1;      for (var i = 0; i < in_str.length; i ++)   {      var c = in_str.charAt(i);            if (c == ' ')      {         if (multi)	 {	    out += '&nbsp;';	    multi = 0;	 }	 else	 {	    out += ' ';	    multi = 1;	 }      }      else if (multi && (c == '\r' || c == '\n' || c == '\t'))      {         out = out.slice(0, out.length - 1) + '&nbsp;' + c;         multi = 0;      }      else      {         out += c;	 multi = 0;      }   }      if (out.charAt(out.length - 1) == ' ')   {      out = out.slice(0, out.length - 1) + '&nbsp;';   }      return out;}// Return a letter frequency count// Caches information for faster retrieval by multiple functions// and faster calculation when text is being typed into the forms.var LetterFrequency_LastText = '';var LetterFrequency_LastFreq = new Array();function LetterFrequency(text){   var n = new Array();   var i = 0, j;      if (LetterFrequency_LastText == text)   {      return LetterFrequency_LastFreq;   }      if (text.slice(0, LetterFrequency_LastText.length) ==       LetterFrequency_LastText)   {      n = LetterFrequency_LastFreq;      i = LetterFrequency_LastText.length;   }      for (j = text.length; i < j; i ++)   {      var c = text.charAt(i);      if (! n[c])      {         n[c] = 1;      }      else      {         n[c] ++;      }   }      LetterFrequency_LastText = text;   LetterFrequency_LastFreq = n;      return n;}// Returns true if the number passed in is prime// 2 is considered the first prime.var PrimeList = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47,   53, 59, 61, 67, 71, 73, 79, 83, 89, 97];function IsPrime(n){   // Get rid of the baddies.   if (n < 2 || n != Math.floor(n)) {      return false;   }      // Quick check for all numbers < 100   for (var i = 0; i < PrimeList.length; i ++) {      if (PrimeList[i] == n) {         return true;      }      if (PrimeList[i] > n) {         return false;      }   }      // Build list of primes needed to do the check   var m = Math.floor(Math.sqrt(n));   var m2 = PrimeList[PrimeList.length - 1];   if (m2 < m) {      while (m2 <= m) {	 m2 += 2;         if (IsPrime(m2)) {	    PrimeList[PrimeList.length] = m2;	 }      }   }      // Now we just cycle through the primes   for (var i = 0; PrimeList[i] <= m; i ++) {      var d = n / PrimeList[i];      if (d == Math.floor(d)) {         return false;      }   }      return true;}// Returns the prime factors of a number as an array// I don't work with negative numbers or zero or non-integers.function GetFactors(n){   var factors = new Array();   if (n < 1 || n != Math.floor(n))   {      return factors;   }      // Check if the number is prime   if (IsPrime(n)) {      factors[factors.length] = n;      return factors;   }      // Start building a list of factors   // This also populates PrimeList with enough primes for us to use   var index = 0;   var skipCheck = 0;   while (skipCheck || ! IsPrime(n)) {      var d = n / PrimeList[index];      if (d == Math.floor(d)) {         if (PrimeList[index] != factors[factors.length - 1]) {	    factors[factors.length] = PrimeList[index];	 }	 n = d;	 skipCheck = 0;      } else {         index ++;	 skipCheck = 1;      }   }   if (n != factors[factors.length - 1]) {      factors[factors.length] = n;   }      return factors;}// Returns true if the numbers we are comparing are coprime.// Returns false if either one is a non-integer or zero.// Returns true if either is one.var CoprimeCache = new Array();var CoprimeCacheNum = new Array();function IsCoprime(a, b){   var a_factors = false, b_factors = false;      if (a < 1 || b < 1 || a != Math.floor(a) || b != Math.floor(b)) {      return false;   }   if (a == 1 || b == 1) {      return true;   }   // Check if we cached either "a" or "b" so we don't need to refactor   // them again.   for (var i = 0; i < CoprimeCacheNum.length; i ++) {      if (CoprimeCacheNum[i] == a) {         a_factors = CoprimeCache[i];      }      if (CoprimeCacheNum[i] == b) {         b_factors = CoprimeCache[i];      }   }      // Get factors   if (! a_factors) {      a_factors = GetFactors(a);   }   if (! b_factors) {      b_factors = GetFactors(b);   }      // Set up the cache again   CoprimeCache = [a_factors, b_factors];   CoprimeCacheNum = [a, b];      var a_idx = 0;   var b_idx = 0;   while (a_idx < a_factors.length && b_idx < b_factors.length)   {      if (a_factors[a_idx] < b_factors[b_idx]) {         a_idx ++;      } else if (a_factors[a_idx] > b_factors[b_idx]) {         b_idx ++;      } else {         // Common factor         return false;      }   }   return true;}   document.Util_Loaded = 1;_)|// Utility functions// Code was written by Tyler Akins and is placed in the public domain// It would be nice if you left this header.  http://rumkin.com// Remove whitespace from beginning and end of textfunction Trim(s){   while (s.length && " \t\r\n".indexOf(s.charAt(0)) >= 0)   {      s = s.slice(1, s.length);   }   while (s.length && " \t\r\n".indexOf(s.charAt(s.length - 1)) >= 0)   {      s = s.slice(0, s.length - 1);   }      return s;}// Exchange characters in F for ones in T for the string S.  If T is not// specified or not long enough, the characters are removed.// "aaabbbC!!" = Tr("AaaBbbCcc", "ABc", "ab!")// "Test thing" = Tr("Test\n thing", "\r\n")function Tr(s, f, t){   var o = '';      if (typeof(t) != 'string')   {      t = '';   }      for (var i = 0; i < s.length; i ++)   {      var c = s.charAt(i);      var idx = f.indexOf(c);      if (idx >= 0)      {         if (idx < t.length)	 {            o += t.charAt(idx);	 }      }      else      {         o += c;      }   }      return o;}// Insert CR and LF characters into e, based on the position of those// characters in T.// If T = "ab\ncd" and E = "zyxw", the result will be "zy\nxw"function InsertCRLF(t, e){   var o = "", i, j;      for (i = 0, j = 0; i < t.length; i ++)   {      if ("\r\n".indexOf(t.charAt(i)) >= 0)      {         o += t.charAt(i);      }      else      {         o += e.charAt(j ++);      }   }      return o;}// Returns an alphabet with a key in front.// Passing the key of "Four. Score! And Seven Days Ago?"// will return  "FOURSCEANDVYGBHIJKLMPQTWXZ"// key = the letters to include in the beginning// alphaet = the alphabet to use (if not A-Z)function MakeKeyedAlphabet(key, alphabet){   var out = "";   if (typeof(alphabet) != 'string')      alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';   else      alphabet = alphabet.toUpperCase();         if (typeof(key) != 'string')      return alphabet;         key = key.toUpperCase() + alphabet;   for (var i = 0; i < key.length; i ++)   {      if (out.indexOf(key.charAt(i)) < 0 &&           alphabet.indexOf(key.charAt(i)) >= 0)      {         out += key.charAt(i);      }   }      return out;}// Make any string contain just alpha charactersfunction OnlyAlpha(str){   var out = "";      for (i = 0; i < str.length; i ++)   {      var b = str.charAt(i);      if (b.toUpperCase() >= 'A' && b.toUpperCase() <= 'Z')      {         out += b;      }   }      return out;}// Change a string into valid HTML textfunction HTMLEscape(str){   var out = "";      for (var i = 0; i < str.length; i ++)   {      var c = str.charAt(i);      if (c == '&')         c = '&amp;';      if (c == '>')         c = '&gt;';      if (c == '<')         c = '&lt;';      if (c == "\n")         c = "<br>\n";      out += c;   }      return out;}// Pass it a textarea object, get it resized automagicallyfunction ResizeTextArea(obj){   var s = obj.value + "\n";   var newlines = 0;   var max_chars = 0;   var i, chars = 0, wide = 0;   var obj_max_cols = 100, obj_min_cols = 40, obj_max_rows = 15;   var scrollbar_width = 2;      for (i = 0; i < s.length; i ++)   {      var c = s.charAt(i);      if (c == "\n")      {         if (max_chars < chars)	    max_chars = chars;	 chars = 0;	 newlines ++;      }      else       {         if (chars == obj_max_cols - scrollbar_width)         {	    max_chars = chars;            j = i;	    var c2 = s.charAt(j);	    while (c2 != "\n" && c2 != ' ' && c2 != "\t" && j > 0)	    {	       j --;	       c2 = s.charAt(j);	    }	    if (c2 != "\n" && j > 0)	    {	       // Not one big long line	       newlines ++;	       chars = 0;	       i = j;	    }	    else	    {	       wide = 1;	    }         }         else         {            chars ++;         }      }            // Short-circuit      if (obj_max_rows <= newlines + wide + 1 &&         obj_max_cols <= max_chars + scrollbar_width)      {         obj.rows = obj_max_rows;	 obj.cols = obj_max_cols;	 return;      }   }      obj.rows = Math.min(obj_max_rows, newlines + wide + 1);   obj.cols = Math.min(Math.max(obj_min_cols, max_chars + scrollbar_width), obj_max_cols);}function Reverse_String(s){   var o = '', i = s.length;      while (i --)   {      o += s.charAt(i);   }      return o;}// Returns 1 if there was no change, 0 if it is not the same// Saves value in the element if it was changed, so subsequent calls// to this function will return 1 until it changes again.// Don't use this function like this://   if (IsUnchanged(x) && IsUnchanged(y) && IsUnchanged(z)) { ... }// The logic code could short-circuit on X or Z (depending on how it// gets parsed) and will jump to the 'if' block without evaluating// all of the variables.  Use this instead://   if (IsUnchanged(x) * IsUnchanged(y) * IsUnchanged(z)) { ... }//   if (IsUnchanged(x) + IsUnchanged(y) + IsUnchanged(z) == 3) { ... }function IsUnchanged(e){   var v;      if (e.type == 'checkbox')   {      v = e.checked.toString();   }   else   {      v = e.value;   }      if (v != e.getAttribute('_oldValue'))   {      e.setAttribute('_oldValue', v);      return 0;   }      return 1;}// Makes a tableau out of a passed in key// Key should be 25 characters!function HTMLTableau(key){   var out = '';      for (var i = 0; i < 25; i ++)   {      if (i > 0 && i % 5 == 0)      {         out += "<br>\n";      }      if (i % 5)      {         out += " ";      }      out += key.charAt(i);   }      return "<tt>" + out + "</tt>";}// Change multiple spaces into &nbsp; to preserve padding.function SwapSpaces(in_str){   var out = '';   var multi = 1;      for (var i = 0; i < in_str.length; i ++)   {      var c = in_str.charAt(i);            if (c == ' ')      {         if (multi)	 {	    out += '&nbsp;';	    multi = 0;	 }	 else	 {	    out += ' ';	    multi = 1;	 }      }      else if (multi && (c == '\r' || c == '\n' || c == '\t'))      {         out = out.slice(0, out.length - 1) + '&nbsp;' + c;         multi = 0;      }      else      {         out += c;	 multi = 0;      }   }      if (out.charAt(out.length - 1) == ' ')   {      out = out.slice(0, out.length - 1) + '&nbsp;';   }      return out;}// Return a letter frequency count// Caches information for faster retrieval by multiple functions// and faster calculation when text is being typed into the forms.var LetterFrequency_LastText = '';var LetterFrequency_LastFreq = new Array();function LetterFrequency(text){   var n = new Array();   var i = 0, j;      if (LetterFrequency_LastText == text)   {      return LetterFrequency_LastFreq;   }      if (text.slice(0, LetterFrequency_LastText.length) ==       LetterFrequency_LastText)   {      n = LetterFrequency_LastFreq;      i = LetterFrequency_LastText.length;   }      for (j = text.length; i < j; i ++)   {      var c = text.charAt(i);      if (! n[c])      {         n[c] = 1;      }      else      {         n[c] ++;      }   }      LetterFrequency_LastText = text;   LetterFrequency_LastFreq = n;      return n;}// Returns true if the number passed in is prime// 2 is considered the first prime.var PrimeList = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47,   53, 59, 61, 67, 71, 73, 79, 83, 89, 97];function IsPrime(n){   // Get rid of the baddies.   if (n < 2 || n != Math.floor(n)) {      return false;   }      // Quick check for all numbers < 100   for (var i = 0; i < PrimeList.length; i ++) {      if (PrimeList[i] == n) {         return true;      }      if (PrimeList[i] > n) {         return false;      }   }      // Build list of primes needed to do the check   var m = Math.floor(Math.sqrt(n));   var m2 = PrimeList[PrimeList.length - 1];   if (m2 < m) {      while (m2 <= m) {	 m2 += 2;         if (IsPrime(m2)) {	    PrimeList[PrimeList.length] = m2;	 }      }   }      // Now we just cycle through the primes   for (var i = 0; PrimeList[i] <= m; i ++) {      var d = n / PrimeList[i];      if (d == Math.floor(d)) {         return false;      }   }      return true;}// Returns the prime factors of a number as an array// I don't work with negative numbers or zero or non-integers.function GetFactors(n){   var factors = new Array();   if (n < 1 || n != Math.floor(n))   {      return factors;   }      // Check if the number is prime   if (IsPrime(n)) {      factors[factors.length] = n;      return factors;   }      // Start building a list of factors   // This also populates PrimeList with enough primes for us to use   var index = 0;   var skipCheck = 0;   while (skipCheck || ! IsPrime(n)) {      var d = n / PrimeList[index];      if (d == Math.floor(d)) {         if (PrimeList[index] != factors[factors.length - 1]) {	    factors[factors.length] = PrimeList[index];	 }	 n = d;	 skipCheck = 0;      } else {         index ++;	 skipCheck = 1;      }   }   if (n != factors[factors.length - 1]) {      factors[factors.length] = n;   }      return factors;}// Returns true if the numbers we are comparing are coprime.// Returns false if either one is a non-integer or zero.// Returns true if either is one.var CoprimeCache = new Array();var CoprimeCacheNum = new Array();function IsCoprime(a, b){   var a_factors = false, b_factors = false;      if (a < 1 || b < 1 || a != Math.floor(a) || b != Math.floor(b)) {      return false;   }   if (a == 1 || b == 1) {      return true;   }   // Check if we cached either "a" or "b" so we don't need to refactor   // them again.   for (var i = 0; i < CoprimeCacheNum.length; i ++) {      if (CoprimeCacheNum[i] == a) {         a_factors = CoprimeCache[i];      }      if (CoprimeCacheNum[i] == b) {         b_factors = CoprimeCache[i];      }   }      // Get factors   if (! a_factors) {      a_factors = GetFactors(a);   }   if (! b_factors) {      b_factors = GetFactors(b);   }      // Set up the cache again   CoprimeCache = [a_factors, b_factors];   CoprimeCacheNum = [a, b];      var a_idx = 0;   var b_idx = 0;   while (a_idx < a_factors.length && b_idx < b_factors.length)   {      if (a_factors[a_idx] < b_factors[b_idx]) {         a_idx ++;      } else if (a_factors[a_idx] > b_factors[b_idx]) {         b_idx ++;      } else {         // Common factor         return false;      }   }   return true;}   document.Util_Loaded = 1;ORø/ /   U t i l i t y   f u n c t i o n s   / /   C o d e   w a s   w r i t t e n   b y   T y l e r   A k i n s   a n d   i s   p l a c e d   i n   t h e   p u b l i c   d o m a i n  / /   I t   w o u l d   b e   n i c e   i f   y o u   l e f t   t h i s   h e a d e r .     h t t p : / / r u m k i n . c o m    / /   R e m o v e   w h i t e s p a c e   f r o m   b e g i n n i n g   a n d   e n d   o f   t e x t  f u n c t i o n   T r i m ( s )  {        w h i l e   ( s . l e n g t h   & &   "   \ t \ r \ n " . i n d e x O f ( s . c h a r A t ( 0 ) )   > =   0 )        {              s   =   s . s l i c e ( 1 ,   s . l e n g t h ) ;        }        w h i l e   ( s . l e n g t h   & &   "   \ t \ r \ n " . i n d e x O f ( s . c h a r A t ( s . l e n g t h   -   1 ) )   > =   0 )        {              s   =   s . s l i c e ( 0 ,   s . l e n g t h   -   1 ) ;        }               r e t u r n   s ;  }    / /   E x c h a n g e   c h a r a c t e r s   i n   F   f o r   o n e s   i n   T   f o r   t h e   s t r i n g   S .     I f   T   i s   n o t  / /   s p e c i f i e d   o r   n o t   l o n g   e n o u g h ,   t h e   c h a r a c t e r s   a r e   r e m o v e d .  / /   " a a a b b b C ! ! "   =   T r ( " A a a B b b C c c " ,   " A B c " ,   " a b ! " )  / /   " T e s t   t h i n g "   =   T r ( " T e s t \ n   t h i n g " ,   " \ r \ n " )  f u n c t i o n   T r ( s ,   f ,   t )  {        v a r   o   =   ' ' ;               i f   ( t y p e o f ( t )   ! =   ' s t r i n g ' )        {              t   =   ' ' ;        }               f o r   ( v a r   i   =   0 ;   i   <   s . l e n g t h ;   i   + + )        {              v a r   c   =   s . c h a r A t ( i ) ;              v a r   i d x   =   f . i n d e x O f ( c ) ;              i f   ( i d x   > =   0 )              {                    i f   ( i d x   <   t . l e n g t h )  	   {                          o   + =   t . c h a r A t ( i d x ) ;  	   }              }              e l s e              {                    o   + =   c ;              }        }               r e t u r n   o ;  }    / /   I n s e r t   C R   a n d   L F   c h a r a c t e r s   i n t o   e ,   b a s e d   o n   t h e   p o s i t i o n   o f   t h o s e  / /   c h a r a c t e r s   i n   T .  / /   I f   T   =   " a b \ n c d "   a n d   E   =   " z y x w " ,   t h e   r e s u l t   w i l l   b e   " z y \ n x w "  f u n c t i o n   I n s e r t C R L F ( t ,   e )  {        v a r   o   =   " " ,   i ,   j ;               f o r   ( i   =   0 ,   j   =   0 ;   i   <   t . l e n g t h ;   i   + + )        {              i f   ( " \ r \ n " . i n d e x O f ( t . c h a r A t ( i ) )   > =   0 )              {                    o   + =   t . c h a r A t ( i ) ;              }              e l s e              {                    o   + =   e . c h a r A t ( j   + + ) ;              }        }               r e t u r n   o ;  }    / /   R e t u r n s   a n   a l p h a b e t   w i t h   a   k e y   i n   f r o n t .  / /   P a s s i n g   t h e   k e y   o f   " F o u r .   S c o r e !   A n d   S e v e n   D a y s   A g o ? "  / /   w i l l   r e t u r n     " F O U R S C E A N D V Y G B H I J K L M P Q T W X Z "  / /   k e y   =   t h e   l e t t e r s   t o   i n c l u d e   i n   t h e   b e g i n n i n g  / /   a l p h a e t   =   t h e   a l p h a b e t   t o   u s e   ( i f   n o t   A - Z )  f u n c t i o n   M a k e K e y e d A l p h a b e t ( k e y ,   a l p h a b e t )  {        v a r   o u t   =   " " ;         i f   ( t y p e o f ( a l p h a b e t )   ! =   ' s t r i n g ' )              a l p h a b e t   =   ' A B C D E F G H I J K L M N O P Q R S T U V W X Y Z ' ;        e l s e              a l p h a b e t   =   a l p h a b e t . t o U p p e r C a s e ( ) ;                     i f   ( t y p e o f ( k e y )   ! =   ' s t r i n g ' )              r e t u r n   a l p h a b e t ;                     k e y   =   k e y . t o U p p e r C a s e ( )   +   a l p h a b e t ;        f o r   ( v a r   i   =   0 ;   i   <   k e y . l e n g t h ;   i   + + )        {              i f   ( o u t . i n d e x O f ( k e y . c h a r A t ( i ) )   <   0   & &                        a l p h a b e t . i n d e x O f ( k e y . c h a r A t ( i ) )   > =   0 )              {                    o u t   + =   k e y . c h a r A t ( i ) ;              }        }               r e t u r n   o u t ;  }    / /   M a k e   a n y   s t r i n g   c o n t a i n   j u s t   a l p h a   c h a r a c t e r s  f u n c t i o n   O n l y A l p h a ( s t r )  {        v a r   o u t   =   " " ;               f o r   ( i   =   0 ;   i   <   s t r . l e n g t h ;   i   + + )        {              v a r   b   =   s t r . c h a r A t ( i ) ;              i f   ( b . t o U p p e r C a s e ( )   > =   ' A '   & &   b . t o U p p e r C a s e ( )   < =   ' Z ' )              {                    o u t   + =   b ;              }        }               r e t u r n   o u t ;  }    / /   C h a n g e   a   s t r i n g   i n t o   v a l i d   H T M L   t e x t  f u n c t i o n   H T M L E s c a p e ( s t r )  {        v a r   o u t   =   " " ;               f o r   ( v a r   i   =   0 ;   i   <   s t r . l e n g t h ;   i   + + )        {              v a r   c   =   s t r . c h a r A t ( i ) ;              i f   ( c   = =   ' & ' )                    c   =   ' & a m p ; ' ;              i f   ( c   = =   ' > ' )                    c   =   ' & g t ; ' ;              i f   ( c   = =   ' < ' )                    c   =   ' & l t ; ' ;              i f   ( c   = =   " \ n " )                    c   =   " < b r > \ n " ;              o u t   + =   c ;        }               r e t u r n   o u t ;  }    / /   P a s s   i t   a   t e x t a r e a   o b j e c t ,   g e t   i t   r e s i z e d   a u t o m a g i c a l l y  f u n c t i o n   R e s i z e T e x t A r e a ( o b j )  {        v a r   s   =   o b j . v a l u e   +   " \ n " ;        v a r   n e w l i n e s   =   0 ;        v a r   m a x _ c h a r s   =   0 ;        v a r   i ,   c h a r s   =   0 ,   w i d e   =   0 ;        v a r   o b j _ m a x _ c o l s   =   1 0 0 ,   o b j _ m i n _ c o l s   =   4 0 ,   o b j _ m a x _ r o w s   =   1 5 ;        v a r   s c r o l l b a r _ w i d t h   =   2 ;               f o r   ( i   =   0 ;   i   <   s . l e n g t h ;   i   + + )        {              v a r   c   =   s . c h a r A t ( i ) ;              i f   ( c   = =   " \ n " )              {                    i f   ( m a x _ c h a r s   <   c h a r s )  	         m a x _ c h a r s   =   c h a r s ;  	   c h a r s   =   0 ;  	   n e w l i n e s   + + ;              }              e l s e                {                    i f   ( c h a r s   = =   o b j _ m a x _ c o l s   -   s c r o l l b a r _ w i d t h )                    {  	         m a x _ c h a r s   =   c h a r s ;                          j   =   i ;  	         v a r   c 2   =   s . c h a r A t ( j ) ;  	         w h i l e   ( c 2   ! =   " \ n "   & &   c 2   ! =   '   '   & &   c 2   ! =   " \ t "   & &   j   >   0 )  	         {  	               j   - - ;  	               c 2   =   s . c h a r A t ( j ) ;  	         }  	         i f   ( c 2   ! =   " \ n "   & &   j   >   0 )  	         {  	               / /   N o t   o n e   b i g   l o n g   l i n e  	               n e w l i n e s   + + ;  	               c h a r s   =   0 ;  	               i   =   j ;  	         }  	         e l s e  	         {  	               w i d e   =   1 ;  	         }                    }                    e l s e                    {                          c h a r s   + + ;                    }              }                           / /   S h o r t - c i r c u i t              i f   ( o b j _ m a x _ r o w s   < =   n e w l i n e s   +   w i d e   +   1   & &                    o b j _ m a x _ c o l s   < =   m a x _ c h a r s   +   s c r o l l b a r _ w i d t h )              {                    o b j . r o w s   =   o b j _ m a x _ r o w s ;  	   o b j . c o l s   =   o b j _ m a x _ c o l s ;  	   r e t u r n ;              }        }               o b j . r o w s   =   M a t h . m i n ( o b j _ m a x _ r o w s ,   n e w l i n e s   +   w i d e   +   1 ) ;        o b j . c o l s   =   M a t h . m i n ( M a t h . m a x ( o b j _ m i n _ c o l s ,   m a x _ c h a r s   +   s c r o l l b a r _ w i d t h ) ,   o b j _ m a x _ c o l s ) ;  }    f u n c t i o n   R e v e r s e _ S t r i n g ( s )  {        v a r   o   =   ' ' ,   i   =   s . l e n g t h ;               w h i l e   ( i   - - )        {              o   + =   s . c h a r A t ( i ) ;        }               r e t u r n   o ;  }    / /   R e t u r n s   1   i f   t h e r e   w a s   n o   c h a n g e ,   0   i f   i t   i s   n o t   t h e   s a m e  / /   S a v e s   v a l u e   i n   t h e   e l e m e n t   i f   i t   w a s   c h a n g e d ,   s o   s u b s e q u e n t   c a l l s  / /   t o   t h i s   f u n c t i o n   w i l l   r e t u r n   1   u n t i l   i t   c h a n g e s   a g a i n .  / /   D o n ' t   u s e   t h i s   f u n c t i o n   l i k e   t h i s :  / /       i f   ( I s U n c h a n g e d ( x )   & &   I s U n c h a n g e d ( y )   & &   I s U n c h a n g e d ( z ) )   {   . . .   }  / /   T h e   l o g i c   c o d e   c o u l d   s h o r t - c i r c u i t   o n   X   o r   Z   ( d e p e n d i n g   o n   h o w   i t  / /   g e t s   p a r s e d )   a n d   w i l l   j u m p   t o   t h e   ' i f '   b l o c k   w i t h o u t   e v a l u a t i n g  / /   a l l   o f   t h e   v a r i a b l e s .     U s e   t h i s   i n s t e a d :  / /       i f   ( I s U n c h a n g e d ( x )   *   I s U n c h a n g e d ( y )   *   I s U n c h a n g e d ( z ) )   {   . . .   }  / /       i f   ( I s U n c h a n g e d ( x )   +   I s U n c h a n g e d ( y )   +   I s U n c h a n g e d ( z )   = =   3 )   {   . . .   }  f u n c t i o n   I s U n c h a n g e d ( e )  {        v a r   v ;               i f   ( e . t y p e   = =   ' c h e c k b o x ' )        {              v   =   e . c h e c k e d . t o S t r i n g ( ) ;        }        e l s e        {              v   =   e . v a l u e ;        }               i f   ( v   ! =   e . g e t A t t r i b u t e ( ' _ o l d V a l u e ' ) )        {              e . s e t A t t r i b u t e ( ' _ o l d V a l u e ' ,   v ) ;              r e t u r n   0 ;        }               r e t u r n   1 ;  }    / /   M a k e s   a   t a b l e a u   o u t   o f   a   p a s s e d   i n   k e y  / /   K e y   s h o u l d   b e   2 5   c h a r a c t e r s !  f u n c t i o n   H T M L T a b l e a u ( k e y )  {        v a r   o u t   =   ' ' ;               f o r   ( v a r   i   =   0 ;   i   <   2 5 ;   i   + + )        {              i f   ( i   >   0   & &   i   %   5   = =   0 )              {                    o u t   + =   " < b r > \ n " ;              }              i f   ( i   %   5 )              {                    o u t   + =   "   " ;              }              o u t   + =   k e y . c h a r A t ( i ) ;        }               r e t u r n   " < t t > "   +   o u t   +   " < / t t > " ;  }    / /   C h a n g e   m u l t i p l e   s p a c e s   i n t o   & n b s p ;   t o   p r e s e r v e   p a d d i n g .  f u n c t i o n   S w a p S p a c e s ( i n _ s t r )  {        v a r   o u t   =   ' ' ;        v a r   m u l t i   =   1 ;               f o r   ( v a r   i   =   0 ;   i   <   i n _ s t r . l e n g t h ;   i   + + )        {              v a r   c   =   i n _ s t r . c h a r A t ( i ) ;                           i f   ( c   = =   '   ' )              {                    i f   ( m u l t i )  	   {  	         o u t   + =   ' & n b s p ; ' ;  	         m u l t i   =   0 ;  	   }  	   e l s e  	   {  	         o u t   + =   '   ' ;  	         m u l t i   =   1 ;  	   }              }              e l s e   i f   ( m u l t i   & &   ( c   = =   ' \ r '   | |   c   = =   ' \ n '   | |   c   = =   ' \ t ' ) )              {                    o u t   =   o u t . s l i c e ( 0 ,   o u t . l e n g t h   -   1 )   +   ' & n b s p ; '   +   c ;                    m u l t i   =   0 ;              }              e l s e              {                    o u t   + =   c ;  	   m u l t i   =   0 ;              }        }               i f   ( o u t . c h a r A t ( o u t . l e n g t h   -   1 )   = =   '   ' )        {              o u t   =   o u t . s l i c e ( 0 ,   o u t . l e n g t h   -   1 )   +   ' & n b s p ; ' ;        }               r e t u r n   o u t ;  }    / /   R e t u r n   a   l e t t e r   f r e q u e n c y   c o u n t  / /   C a c h e s   i n f o r m a t i o n   f o r   f a s t e r   r e t r i e v a l   b y   m u l t i p l e   f u n c t i o n s  / /   a n d   f a s t e r   c a l c u l a t i o n   w h e n   t e x t   i s   b e i n g   t y p e d   i n t o   t h e   f o r m s .  v a r   L e t t e r F r e q u e n c y _ L a s t T e x t   =   ' ' ;  v a r   L e t t e r F r e q u e n c y _ L a s t F r e q   =   n e w   A r r a y ( ) ;  f u n c t i o n   L e t t e r F r e q u e n c y ( t e x t )  {        v a r   n   =   n e w   A r r a y ( ) ;        v a r   i   =   0 ,   j ;               i f   ( L e t t e r F r e q u e n c y _ L a s t T e x t   = =   t e x t )        {              r e t u r n   L e t t e r F r e q u e n c y _ L a s t F r e q ;        }               i f   ( t e x t . s l i c e ( 0 ,   L e t t e r F r e q u e n c y _ L a s t T e x t . l e n g t h )   = =                L e t t e r F r e q u e n c y _ L a s t T e x t )        {              n   =   L e t t e r F r e q u e n c y _ L a s t F r e q ;              i   =   L e t t e r F r e q u e n c y _ L a s t T e x t . l e n g t h ;        }               f o r   ( j   =   t e x t . l e n g t h ;   i   <   j ;   i   + + )        {              v a r   c   =   t e x t . c h a r A t ( i ) ;              i f   ( !   n [ c ] )              {                    n [ c ]   =   1 ;              }              e l s e              {                    n [ c ]   + + ;              }        }               L e t t e r F r e q u e n c y _ L a s t T e x t   =   t e x t ;        L e t t e r F r e q u e n c y _ L a s t F r e q   =   n ;               r e t u r n   n ;  }    / /   R e t u r n s   t r u e   i f   t h e   n u m b e r   p a s s e d   i n   i s   p r i m e  / /   2   i s   c o n s i d e r e d   t h e   f i r s t   p r i m e .  v a r   P r i m e L i s t   =   [ 2 ,   3 ,   5 ,   7 ,   1 1 ,   1 3 ,   1 7 ,   1 9 ,   2 3 ,   2 9 ,   3 1 ,   3 7 ,   4 1 ,   4 3 ,   4 7 ,        5 3 ,   5 9 ,   6 1 ,   6 7 ,   7 1 ,   7 3 ,   7 9 ,   8 3 ,   8 9 ,   9 7 ] ;  f u n c t i o n   I s P r i m e ( n )  {        / /   G e t   r i d   o f   t h e   b a d d i e s .        i f   ( n   <   2   | |   n   ! =   M a t h . f l o o r ( n ) )   {              r e t u r n   f a l s e ;        }               / /   Q u i c k   c h e c k   f o r   a l l   n u m b e r s   <   1 0 0        f o r   ( v a r   i   =   0 ;   i   <   P r i m e L i s t . l e n g t h ;   i   + + )   {              i f   ( P r i m e L i s t [ i ]   = =   n )   {                    r e t u r n   t r u e ;              }              i f   ( P r i m e L i s t [ i ]   >   n )   {                    r e t u r n   f a l s e ;              }        }               / /   B u i l d   l i s t   o f   p r i m e s   n e e d e d   t o   d o   t h e   c h e c k        v a r   m   =   M a t h . f l o o r ( M a t h . s q r t ( n ) ) ;        v a r   m 2   =   P r i m e L i s t [ P r i m e L i s t . l e n g t h   -   1 ] ;        i f   ( m 2   <   m )   {              w h i l e   ( m 2   < =   m )   {  	   m 2   + =   2 ;                    i f   ( I s P r i m e ( m 2 ) )   {  	         P r i m e L i s t [ P r i m e L i s t . l e n g t h ]   =   m 2 ;  	   }              }        }               / /   N o w   w e   j u s t   c y c l e   t h r o u g h   t h e   p r i m e s        f o r   ( v a r   i   =   0 ;   P r i m e L i s t [ i ]   < =   m ;   i   + + )   {              v a r   d   =   n   /   P r i m e L i s t [ i ] ;              i f   ( d   = =   M a t h . f l o o r ( d ) )   {                    r e t u r n   f a l s e ;              }        }               r e t u r n   t r u e ;  }    / /   R e t u r n s   t h e   p r i m e   f a c t o r s   o f   a   n u m b e r   a s   a n   a r r a y  / /   I   d o n ' t   w o r k   w i t h   n e g a t i v e   n u m b e r s   o r   z e r o   o r   n o n - i n t e g e r s .  f u n c t i o n   G e t F a c t o r s ( n )  {        v a r   f a c t o r s   =   n e w   A r r a y ( ) ;        i f   ( n   <   1   | |   n   ! =   M a t h . f l o o r ( n ) )        {              r e t u r n   f a c t o r s ;        }               / /   C h e c k   i f   t h e   n u m b e r   i s   p r i m e        i f   ( I s P r i m e ( n ) )   {              f a c t o r s [ f a c t o r s . l e n g t h ]   =   n ;              r e t u r n   f a c t o r s ;        }               / /   S t a r t   b u i l d i n g   a   l i s t   o f   f a c t o r s        / /   T h i s   a l s o   p o p u l a t e s   P r i m e L i s t   w i t h   e n o u g h   p r i m e s   f o r   u s   t o   u s e        v a r   i n d e x   =   0 ;        v a r   s k i p C h e c k   =   0 ;        w h i l e   ( s k i p C h e c k   | |   !   I s P r i m e ( n ) )   {              v a r   d   =   n   /   P r i m e L i s t [ i n d e x ] ;              i f   ( d   = =   M a t h . f l o o r ( d ) )   {                    i f   ( P r i m e L i s t [ i n d e x ]   ! =   f a c t o r s [ f a c t o r s . l e n g t h   -   1 ] )   {  	         f a c t o r s [ f a c t o r s . l e n g t h ]   =   P r i m e L i s t [ i n d e x ] ;  	   }  	   n   =   d ;  	   s k i p C h e c k   =   0 ;              }   e l s e   {                    i n d e x   + + ;  	   s k i p C h e c k   =   1 ;              }        }        i f   ( n   ! =   f a c t o r s [ f a c t o r s . l e n g t h   -   1 ] )   {              f a c t o r s [ f a c t o r s . l e n g t h ]   =   n ;        }               r e t u r n   f a c t o r s ;  }    / /   R e t u r n s   t r u e   i f   t h e   n u m b e r s   w e   a r e   c o m p a r i n g   a r e   c o p r i m e .  / /   R e t u r n s   f a l s e   i f   e i t h e r   o n e   i s   a   n o n - i n t e g e r   o r   z e r o .  / /   R e t u r n s   t r u e   i f   e i t h e r   i s   o n e .  v a r   C o p r i m e C a c h e   =   n e w   A r r a y ( ) ;  v a r   C o p r i m e C a c h e N u m   =   n e w   A r r a y ( ) ;  f u n c t i o n   I s C o p r i m e ( a ,   b )  {        v a r   a _ f a c t o r s   =   f a l s e ,   b _ f a c t o r s   =   f a l s e ;               i f   ( a   <   1   | |   b   <   1   | |   a   ! =   M a t h . f l o o r ( a )   | |   b   ! =   M a t h . f l o o r ( b ) )   {              r e t u r n   f a l s e ;        }        i f   ( a   = =   1   | |   b   = =   1 )   {              r e t u r n   t r u e ;        }         / /   C h e c k   i f   w e   c a c h e d   e i t h e r   " a "   o r   " b "   s o   w e   d o n ' t   n e e d   t o   r e f a c t o r        / /   t h e m   a g a i n .        f o r   ( v a r   i   =   0 ;   i   <   C o p r i m e C a c h e N u m . l e n g t h ;   i   + + )   {              i f   ( C o p r i m e C a c h e N u m [ i ]   = =   a )   {                    a _ f a c t o r s   =   C o p r i m e C a c h e [ i ] ;              }              i f   ( C o p r i m e C a c h e N u m [ i ]   = =   b )   {                    b _ f a c t o r s   =   C o p r i m e C a c h e [ i ] ;              }        }               / /   G e t   f a c t o r s        i f   ( !   a _ f a c t o r s )   {              a _ f a c t o r s   =   G e t F a c t o r s ( a ) ;        }        i f   ( !   b _ f a c t o r s )   {              b _ f a c t o r s   =   G e t F a c t o r s ( b ) ;        }               / /   S e t   u p   t h e   c a c h e   a g a i n        C o p r i m e C a c h e   =   [ a _ f a c t o r s ,   b _ f a c t o r s ] ;        C o p r i m e C a c h e N u m   =   [ a ,   b ] ;               v a r   a _ i d x   =   0 ;        v a r   b _ i d x   =   0 ;        w h i l e   ( a _ i d x   <   a _ f a c t o r s . l e n g t h   & &   b _ i d x   <   b _ f a c t o r s . l e n g t h )        {              i f   ( a _ f a c t o r s [ a _ i d x ]   <   b _ f a c t o r s [ b _ i d x ] )   {                    a _ i d x   + + ;              }   e l s e   i f   ( a _ f a c t o r s [ a _ i d x ]   >   b _ f a c t o r s [ b _ i d x ] )   {                    b _ i d x   + + ;              }   e l s e   {                    / /   C o m m o n   f a c t o r                    r e t u r n   f a l s e ;              }        }        r e t u r n   t r u e ;  }          d o c u m e n t . U t i l _ L o a d e d   =   1 ;       B [ u)õSu             	              ¦q